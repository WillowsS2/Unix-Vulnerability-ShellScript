#!/bin/bash

# log파일로 해당 진단 내용 파일 생성 
. function.sh
TMP1=`SCRIPTNAME`.log
> $TMP1

BAR
CODE [ U-28 ] NIS, NIS+ 점검
cat << EOF >> $RESULT
[ 양호 ] : NIS 서비스가 비활성화 되어 있거나, 필요 시 NIS+를 사용하는 경우
[ 취약 ] : NIS 서비스가 활성화 되어 있는 경우
EOF
BAR

# NIS, NIS+ 서비스 구동 확인
ps -ef | egrep '(ypserv|ypbind|ypxfrd|rpc.yppasswdd|rpc.ypupdated)' | grep -v egrep > $TMP1
if [ -s $TMP1 ]; then
    WARN 불필요한 서비스들이 활성화되어 있습니다.
    INFO $TMP1 파일을 확인해야 합니다.
else
    OK 불필요한 서비스들이 비활성화되어 있습니다.
    rm $TMP1
fi

cat $RESULT
echo;